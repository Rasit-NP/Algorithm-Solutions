# [Platinum V] 정다각형 선분 - 13436 

[문제 링크](https://www.acmicpc.net/problem/13436) 

### 성능 요약

메모리: 94060 KB, 시간: 1644 ms

### 분류

다이나믹 프로그래밍, 기하학, 비트마스킹, 비트필드를 이용한 다이나믹 프로그래밍, 외판원 순회 문제

### 제출 일자

2025년 10월 25일 13:02:17

### 문제 설명

<p>도현이는 종이에 점 N개를 찍어서 정 N각형을 만들었다. 정점은 1번부터 N번까지 시계 방향으로 매겨져 있다.</p>

<p>그 다음, 직선을 총 M-1개 그렸다. 직선은 도현이가 그린 다각형의 꼭짓점을 연속해서 연결해서 그렸으며, 그 순서는 P<sub>i</sub>로 나타낸다. 즉, P<sub>0</sub>번과 P<sub>1</sub>번을 연결하고, P<sub>1</sub>번과 P<sub>2</sub>번을, ..., P<sub>M-2</sub>번과 P<sub>M-1</sub>번을 연결했다.</p>

<p>이제, 모든 꼭짓점을 한 번씩 방문하고, P<sub>0</sub>으로 다시 돌아오는 경로를 만들어 보려고 한다. 즉, 남은 꼭짓점을 방문한 순서를 Ti라고 했을 때, P<sub>M-1</sub>과 T<sub>0</sub>을 연결하고, T<sub>0</sub>과 T<sub>1</sub>을, ..., T<sub>N-M-1</sub>과 P<sub>0</sub>을 연결해야 한다.</p>

<p>시작점 (P<sub>0</sub>)을 제외한 모든 꼭짓점은 한 번씩 방문해야 하며, P에 포함되어 있는 꼭짓점과 T에 포함되어 있는 꼭짓점은 겹치면 안 된다. 또, 새로운 꼭짓점을 연결할 때는 이전에 그린 선분과 교차하게 그려야 한다. 이때, 교차는 P에서 그린 선분과 새로 그린 선분 모두를 포함한다.</p>

<p>N과 M, 그리고 P가 주어졌을 때, 가능한 T의 방법의 수를 구하는 프로그램을 작성하시오.</p>

### 입력 

 <p>첫째 줄에 N과 M이 주어지고, 둘째 줄에 P<sub>i</sub>가 P<sub>0</sub>부터 순서대로 주어진다. (4 ≤ N ≤ 18, 2 ≤ M ≤ N-1)</p>

### 출력 

 <p>첫째 줄에 가능한 T의 방법의 수를 출력한다.</p>

